# âœ… æ¨¡æ‹Ÿæ•°æ®åº“å·²å®Œå…¨ç§»é™¤ï¼Œæ”¹ç”¨MySQL

## å·²å®Œæˆçš„ä¿®æ”¹

### 1. UserController.java
- âœ… **åˆ é™¤**: `private static final Map<String, String> userMap = new HashMap<>();`
- âœ… **æ·»åŠ **: `@Autowired private UserMapper userMapper;`
- âœ… **æ³¨å†ŒåŠŸèƒ½**: ä½¿ç”¨ `userMapper.selectOne()` å’Œ `userMapper.insert()` æ“ä½œMySQL
- âœ… **ç™»å½•åŠŸèƒ½**: ä½¿ç”¨ `userMapper.selectOne()` ä»MySQLéªŒè¯ç”¨æˆ·

### 2. é…ç½®æ–‡ä»¶æ›´æ–°
#### service-provider/application.yml
- âœ… MySQL: `132.226.64.96:3306/test1`
- âœ… Redis: `132.226.64.96:6379` (å¯†ç : 20041122gooder)
- âœ… Nacos: `132.226.64.96:8848` (ç”¨æˆ·åå¯†ç : nacos/nacos)

#### service-consumer/application.yml
- âœ… Nacos: `132.226.64.96:8848` (ç”¨æˆ·åå¯†ç : nacos/nacos)

---

## æ•°æ®æµå¯¹æ¯”

### âŒ ä¹‹å‰ï¼ˆæ¨¡æ‹Ÿæ•°æ®åº“ï¼‰
```
æ³¨å†Œ: userMap.put(username, password)
ç™»å½•: userMap.containsKey() && userMap.get().equals()
å­˜å‚¨: å†…å­˜Map (é‡å¯ä¸¢å¤±)
```

### âœ… ç°åœ¨ï¼ˆMySQLæ•°æ®åº“ï¼‰
```
æ³¨å†Œ: userMapper.insert(user)              â†’ MySQL userè¡¨
ç™»å½•: userMapper.selectOne(queryWrapper)   â†’ MySQL userè¡¨
å­˜å‚¨: MySQLæ•°æ®åº“ (æŒä¹…åŒ–å­˜å‚¨)
Token: redisTemplate                       â†’ Redisç¼“å­˜
```

---

## éœ€è¦æ‰§è¡Œçš„åˆå§‹åŒ–

### 1. åˆ›å»ºMySQLè¡¨
```sql
-- è¿æ¥åˆ°MySQL
mysql -h 132.226.64.96 -P 3306 -u 123456 -p123456

-- ä½¿ç”¨æ•°æ®åº“
USE test1;

-- åˆ›å»ºç”¨æˆ·è¡¨
CREATE TABLE IF NOT EXISTS `user` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'ç”¨æˆ·ID',
  `username` VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·å',
  `password` VARCHAR(100) NOT NULL COMMENT 'å¯†ç ',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·è¡¨';

-- éªŒè¯
SHOW TABLES;
DESC user;
```

### 2. é‡æ–°ç¼–è¯‘é¡¹ç›®
```bash
mvn clean install
```

### 3. å¯åŠ¨æœåŠ¡
```bash
# ç»ˆç«¯1: å¯åŠ¨service-provider
cd service-provider
mvn spring-boot:run

# ç»ˆç«¯2: å¯åŠ¨service-consumer
cd service-consumer
mvn spring-boot:run
```

---

## éªŒè¯MySQLæ˜¯å¦ç”Ÿæ•ˆ

### æµ‹è¯•1: æ³¨å†Œç”¨æˆ·
```bash
curl -X POST http://localhost:8082/api/user/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test001","password":"123456"}'
```

### æµ‹è¯•2: åœ¨MySQLä¸­æŸ¥è¯¢
```sql
SELECT * FROM user WHERE username = 'test001';
```
åº”è¯¥èƒ½çœ‹åˆ°åˆšæ³¨å†Œçš„ç”¨æˆ·ï¼

### æµ‹è¯•3: ç™»å½•
```bash
curl -X POST http://localhost:8082/api/user/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test001","password":"123456"}'
```

### æµ‹è¯•4: é‡å¯æœåŠ¡åå†æ¬¡ç™»å½•
é‡å¯service-providerï¼Œç”¨æˆ·æ•°æ®ä¾ç„¶å­˜åœ¨ï¼ˆä¸åƒä¹‹å‰çš„Mapä¼šä¸¢å¤±ï¼‰

---

## å…³é”®æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| UserController.java | âœ… å·²ä¿®æ”¹ | åˆ é™¤userMapï¼Œä½¿ç”¨UserMapper |
| UserMapper.java | âœ… å·²å­˜åœ¨ | MyBatis-Plus Mapperæ¥å£ |
| User.java | âœ… å·²å­˜åœ¨ | æ·»åŠ äº†@TableNameç­‰æ³¨è§£ |
| ProviderApplication.java | âœ… å·²å­˜åœ¨ | æ·»åŠ äº†@MapperScan |
| pom.xml | âœ… å·²å­˜åœ¨ | åŒ…å«MySQLå’ŒMyBatis-Plusä¾èµ– |
| init.sql | âœ… å·²å­˜åœ¨ | æ•°æ®åº“å»ºè¡¨è„šæœ¬ |

---

æ¨¡æ‹Ÿæ•°æ®åº“å·²å®Œå…¨ç§»é™¤ï¼Œæ‰€æœ‰ç”¨æˆ·æ•°æ®ç°åœ¨å­˜å‚¨åœ¨MySQLä¸­ï¼ğŸ‰
