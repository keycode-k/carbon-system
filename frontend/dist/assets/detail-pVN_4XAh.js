import{_ as H,r as h,m as R,c as d,q as S,h as w,N as p,t as z,w as l,a4 as $,E as q,f as u,g as A,o as n,b as s,d as o,e as i,v as r,x as m,a1 as F,a2 as W,a3 as X,H as j,W as G,X as J}from"./index-Dl24hcOp.js";import{a as K,g as O}from"./news-DvoziJha.js";const P={class:"app-container"},Q={class:"back-btn"},U={key:0,class:"news-detail"},Y={class:"news-title"},Z={class:"news-meta"},ee={key:0},te={key:0,class:"cover-image"},ae=["src","alt"],se={key:1,class:"news-summary"},oe=["innerHTML"],le={class:"news-actions"},ne={class:"action-buttons"},ie={class:"related-news"},re=["onClick"],ce={class:"related-title"},de={class:"related-meta"},ue={__name:"detail",setup(_e){const k=A(),C=$(),e=h(null),g=h([]),y=h(!1),N=async()=>{y.value=!0;try{const t=C.params.id;console.log("News Detail ID:",t,typeof t);const a=await K(t);e.value=a,a&&a.category&&T(a.category,t)}catch(t){q.error("加载新闻详情失败"),console.error(t)}finally{y.value=!1}},T=async(t,a)=>{try{const c=await O({page:1,size:5,category:t,status:1});g.value=(c.records||[]).filter(f=>f.id!==a).slice(0,4)}catch(c){console.error("加载相关推荐失败",c)}},x=()=>{k.back()},L=t=>{k.push(`/news/detail/${t}`),N()},D=t=>t?new Date(t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",M=t=>({政策法规:"danger",行业动态:"primary",技术创新:"success",市场分析:"warning"})[t]||"info";return R(()=>{N()}),(t,a)=>{const c=u("el-button"),f=u("el-tag"),_=u("el-icon"),B=u("el-alert"),I=u("el-divider"),V=u("el-empty"),b=u("el-card"),E=z("loading");return n(),d("div",P,[S((n(),w(b,null,{default:l(()=>[s("div",Q,[o(c,{onClick:x,icon:"ArrowLeft"},{default:l(()=>[...a[0]||(a[0]=[i("返回列表",-1)])]),_:1})]),e.value?(n(),d("div",U,[s("h1",Y,r(e.value.title),1),s("div",Z,[o(f,{type:M(e.value.category)},{default:l(()=>[i(r(e.value.category),1)]),_:1},8,["type"]),s("span",null,[o(_,null,{default:l(()=>[o(m(F))]),_:1}),i(" "+r(e.value.author),1)]),e.value.source?(n(),d("span",ee,[o(_,null,{default:l(()=>[o(m(W))]),_:1}),i(" "+r(e.value.source),1)])):p("",!0),s("span",null,[o(_,null,{default:l(()=>[o(m(X))]),_:1}),i(" "+r(e.value.viewCount||0),1)]),s("span",null,[o(_,null,{default:l(()=>[o(m(j))]),_:1}),i(" "+r(D(e.value.publishTime)),1)])]),e.value.coverImage?(n(),d("div",te,[s("img",{src:e.value.coverImage,alt:e.value.title},null,8,ae)])):p("",!0),e.value.summary?(n(),d("div",se,[o(B,{title:e.value.summary,type:"info",closable:!1},null,8,["title"])])):p("",!0),s("div",{class:"news-content",innerHTML:e.value.content},null,8,oe),s("div",le,[o(I),s("div",ne,[o(c,{type:"primary",icon:"Share"},{default:l(()=>[...a[1]||(a[1]=[i("分享",-1)])]),_:1}),o(c,{icon:"Star"},{default:l(()=>[...a[2]||(a[2]=[i("收藏",-1)])]),_:1})])])])):(n(),w(V,{key:1,description:"新闻不存在或已被删除"}))]),_:1})),[[E,y.value]]),g.value.length>0?(n(),w(b,{key:0,style:{"margin-top":"20px"}},{header:l(()=>[...a[3]||(a[3]=[i("相关推荐",-1)])]),default:l(()=>[s("div",ie,[(n(!0),d(G,null,J(g.value,v=>(n(),d("div",{key:v.id,class:"related-item",onClick:ve=>L(v.id)},[s("div",ce,r(v.title),1),s("div",de,[s("span",null,r(D(v.publishTime)),1)])],8,re))),128))])]),_:1})):p("",!0)])}}},ge=H(ue,[["__scopeId","data-v-a3821f19"]]);export{ge as default};
