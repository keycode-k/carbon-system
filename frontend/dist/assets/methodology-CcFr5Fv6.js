import{_ as ue,a as x,r as y,m as re,c as P,d as e,w as t,f as s,s as A,E as C,t as ie,o as D,q as pe,e as n,h as L,v as f,b as N,L as me}from"./index-Dl24hcOp.js";const fe={class:"app-container"},be={class:"card-header"},ge={key:1},ce={__name:"methodology",setup(_e){const i=x({name:"",category:"",status:""}),z=y([]),h=y(!1),m=x({page:1,size:10,total:0}),V=y(!1),k=y(""),U=y(!1),w=y(),o=x({id:null,code:"",name:"",category:"",version:"",publisher:"",publishDate:"",status:"ACTIVE",description:"",fileUrl:""}),r=y({}),j={code:[{required:!0,message:"请输入方法学编号",trigger:"blur"}],name:[{required:!0,message:"请输入方法学名称",trigger:"blur"}],category:[{required:!0,message:"请选择适用领域",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},_=async()=>{h.value=!0;try{const d={page:m.page,size:m.size,...i},l=await A({url:"/api/development/methodology/list",method:"get",params:d});z.value=l.records||[],m.total=l.total||0}catch{C.error("加载数据失败")}finally{h.value=!1}},O=()=>{m.page=1,_()},G=()=>{i.name="",i.category="",i.status="",m.page=1,_()},H=()=>{k.value="新增方法学",R(),V.value=!0},J=d=>{k.value="编辑方法学",Object.assign(o,d),V.value=!0},K=d=>{r.value=d,U.value=!0},Q=d=>{me.confirm("确定要删除该方法学吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await A({url:`/api/development/methodology/${d.id}`,method:"delete"}),C.success("删除成功"),_()}catch{C.error("删除失败")}})},W=async()=>{await w.value.validate();try{const d=o.id?`/api/development/methodology/${o.id}`:"/api/development/methodology",l=o.id?"put":"post";await A({url:d,method:l,data:o}),C.success(o.id?"更新成功":"新增成功"),V.value=!1,_()}catch{C.error("操作失败")}},X=()=>{w.value?.resetFields(),R()},R=()=>{o.id=null,o.code="",o.name="",o.category="",o.version="",o.publisher="",o.publishDate="",o.status="ACTIVE",o.description="",o.fileUrl=""},Y=()=>{_()},Z=()=>{_()},S=d=>d?new Date(d).toLocaleDateString("zh-CN"):"-",M=d=>({ACTIVE:"success",DRAFT:"warning",DEPRECATED:"info"})[d]||"info",B=d=>({ACTIVE:"有效",DRAFT:"草案",DEPRECATED:"已废弃"})[d]||d;return re(()=>{_()}),(d,l)=>{const g=s("el-button"),v=s("el-input"),u=s("el-form-item"),p=s("el-option"),E=s("el-select"),F=s("el-form"),c=s("el-table-column"),I=s("el-tag"),ee=s("el-table"),le=s("el-pagination"),te=s("el-card"),ae=s("el-date-picker"),T=s("el-radio"),oe=s("el-radio-group"),$=s("el-dialog"),b=s("el-descriptions-item"),ne=s("el-link"),de=s("el-descriptions"),se=ie("loading");return D(),P("div",fe,[e(te,null,{header:t(()=>[N("div",be,[l[18]||(l[18]=N("span",null,"方法学管理",-1)),e(g,{type:"primary",onClick:H},{default:t(()=>[...l[17]||(l[17]=[n("新增方法学",-1)])]),_:1})])]),default:t(()=>[e(F,{inline:!0,model:i,class:"search-form"},{default:t(()=>[e(u,{label:"方法学名称"},{default:t(()=>[e(v,{modelValue:i.name,"onUpdate:modelValue":l[0]||(l[0]=a=>i.name=a),placeholder:"请输入方法学名称",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"适用领域"},{default:t(()=>[e(E,{modelValue:i.category,"onUpdate:modelValue":l[1]||(l[1]=a=>i.category=a),placeholder:"请选择领域",clearable:""},{default:t(()=>[e(p,{label:"林业碳汇",value:"林业碳汇"}),e(p,{label:"可再生能源",value:"可再生能源"}),e(p,{label:"节能减排",value:"节能减排"}),e(p,{label:"废弃物处理",value:"废弃物处理"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"状态"},{default:t(()=>[e(E,{modelValue:i.status,"onUpdate:modelValue":l[2]||(l[2]=a=>i.status=a),placeholder:"请选择状态",clearable:""},{default:t(()=>[e(p,{label:"有效",value:"ACTIVE"}),e(p,{label:"草案",value:"DRAFT"}),e(p,{label:"已废弃",value:"DEPRECATED"})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(g,{type:"primary",onClick:O},{default:t(()=>[...l[19]||(l[19]=[n("查询",-1)])]),_:1}),e(g,{onClick:G},{default:t(()=>[...l[20]||(l[20]=[n("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),pe((D(),L(ee,{data:z.value,border:"",style:{width:"100%"}},{default:t(()=>[e(c,{prop:"code",label:"方法学编号",width:"150"}),e(c,{prop:"name",label:"方法学名称","min-width":"200"}),e(c,{prop:"category",label:"适用领域",width:"120"}),e(c,{prop:"version",label:"版本",width:"100"}),e(c,{prop:"publisher",label:"发布机构",width:"120"}),e(c,{prop:"publishDate",label:"发布日期",width:"120"},{default:t(({row:a})=>[n(f(S(a.publishDate)),1)]),_:1}),e(c,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(I,{type:M(a.status)},{default:t(()=>[n(f(B(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(c,{label:"操作",width:"200",fixed:"right"},{default:t(({row:a})=>[e(g,{link:"",type:"primary",onClick:q=>K(a)},{default:t(()=>[...l[21]||(l[21]=[n("查看",-1)])]),_:1},8,["onClick"]),e(g,{link:"",type:"primary",onClick:q=>J(a)},{default:t(()=>[...l[22]||(l[22]=[n("编辑",-1)])]),_:1},8,["onClick"]),e(g,{link:"",type:"danger",onClick:q=>Q(a)},{default:t(()=>[...l[23]||(l[23]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[se,h.value]]),e(le,{"current-page":m.page,"onUpdate:currentPage":l[3]||(l[3]=a=>m.page=a),"page-size":m.size,"onUpdate:pageSize":l[4]||(l[4]=a=>m.size=a),total:m.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Y,onCurrentChange:Z,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),e($,{modelValue:V.value,"onUpdate:modelValue":l[15]||(l[15]=a=>V.value=a),title:k.value,width:"600px",onClose:X},{footer:t(()=>[e(g,{onClick:l[14]||(l[14]=a=>V.value=!1)},{default:t(()=>[...l[27]||(l[27]=[n("取消",-1)])]),_:1}),e(g,{type:"primary",onClick:W},{default:t(()=>[...l[28]||(l[28]=[n("确定",-1)])]),_:1})]),default:t(()=>[e(F,{model:o,rules:j,ref_key:"formRef",ref:w,"label-width":"100px"},{default:t(()=>[e(u,{label:"方法学编号",prop:"code"},{default:t(()=>[e(v,{modelValue:o.code,"onUpdate:modelValue":l[5]||(l[5]=a=>o.code=a),placeholder:"如: CM-001-V01"},null,8,["modelValue"])]),_:1}),e(u,{label:"方法学名称",prop:"name"},{default:t(()=>[e(v,{modelValue:o.name,"onUpdate:modelValue":l[6]||(l[6]=a=>o.name=a),placeholder:"请输入方法学名称"},null,8,["modelValue"])]),_:1}),e(u,{label:"适用领域",prop:"category"},{default:t(()=>[e(E,{modelValue:o.category,"onUpdate:modelValue":l[7]||(l[7]=a=>o.category=a),placeholder:"请选择适用领域",style:{width:"100%"}},{default:t(()=>[e(p,{label:"林业碳汇",value:"林业碳汇"}),e(p,{label:"可再生能源",value:"可再生能源"}),e(p,{label:"节能减排",value:"节能减排"}),e(p,{label:"废弃物处理",value:"废弃物处理"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"版本号",prop:"version"},{default:t(()=>[e(v,{modelValue:o.version,"onUpdate:modelValue":l[8]||(l[8]=a=>o.version=a),placeholder:"如: V1.0"},null,8,["modelValue"])]),_:1}),e(u,{label:"发布机构",prop:"publisher"},{default:t(()=>[e(v,{modelValue:o.publisher,"onUpdate:modelValue":l[9]||(l[9]=a=>o.publisher=a),placeholder:"如: 国家发改委"},null,8,["modelValue"])]),_:1}),e(u,{label:"发布日期",prop:"publishDate"},{default:t(()=>[e(ae,{modelValue:o.publishDate,"onUpdate:modelValue":l[10]||(l[10]=a=>o.publishDate=a),type:"datetime",placeholder:"选择发布日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(u,{label:"状态",prop:"status"},{default:t(()=>[e(oe,{modelValue:o.status,"onUpdate:modelValue":l[11]||(l[11]=a=>o.status=a)},{default:t(()=>[e(T,{label:"ACTIVE"},{default:t(()=>[...l[24]||(l[24]=[n("有效",-1)])]),_:1}),e(T,{label:"DRAFT"},{default:t(()=>[...l[25]||(l[25]=[n("草案",-1)])]),_:1}),e(T,{label:"DEPRECATED"},{default:t(()=>[...l[26]||(l[26]=[n("已废弃",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"方法学描述"},{default:t(()=>[e(v,{modelValue:o.description,"onUpdate:modelValue":l[12]||(l[12]=a=>o.description=a),type:"textarea",rows:4,placeholder:"请输入方法学描述"},null,8,["modelValue"])]),_:1}),e(u,{label:"文件URL"},{default:t(()=>[e(v,{modelValue:o.fileUrl,"onUpdate:modelValue":l[13]||(l[13]=a=>o.fileUrl=a),placeholder:"方法学文件下载地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e($,{modelValue:U.value,"onUpdate:modelValue":l[16]||(l[16]=a=>U.value=a),title:"方法学详情",width:"600px"},{default:t(()=>[e(de,{column:2,border:""},{default:t(()=>[e(b,{label:"方法学编号"},{default:t(()=>[n(f(r.value.code),1)]),_:1}),e(b,{label:"方法学名称"},{default:t(()=>[n(f(r.value.name),1)]),_:1}),e(b,{label:"适用领域"},{default:t(()=>[n(f(r.value.category),1)]),_:1}),e(b,{label:"版本号"},{default:t(()=>[n(f(r.value.version),1)]),_:1}),e(b,{label:"发布机构"},{default:t(()=>[n(f(r.value.publisher),1)]),_:1}),e(b,{label:"发布日期"},{default:t(()=>[n(f(S(r.value.publishDate)),1)]),_:1}),e(b,{label:"状态"},{default:t(()=>[e(I,{type:M(r.value.status)},{default:t(()=>[n(f(B(r.value.status)),1)]),_:1},8,["type"])]),_:1}),e(b,{label:"文件URL",span:2},{default:t(()=>[r.value.fileUrl?(D(),L(ne,{key:0,href:r.value.fileUrl,type:"primary",target:"_blank"},{default:t(()=>[...l[29]||(l[29]=[n(" 下载方法学文件 ",-1)])]),_:1},8,["href"])):(D(),P("span",ge,"-"))]),_:1}),e(b,{label:"方法学描述",span:2},{default:t(()=>[n(f(r.value.description||"-"),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ye=ue(ce,[["__scopeId","data-v-c9bf2c3b"]]);export{ye as default};
