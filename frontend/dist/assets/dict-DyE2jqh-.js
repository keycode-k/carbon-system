import{_ as ve,r,a as P,k as _e,m as be,c as w,d as l,w as t,f as i,t as Ve,o as m,q as Q,x as A,U as ge,h as D,N as Y,W as ke,X as we,n as Te,b as f,v as g,a0 as Z,e as n,B as h,L as ee,E as k}from"./index-Dl24hcOp.js";import{p as Ce,q as Le,s as De,t as xe,v as Ne,w as Ue,x as Se,y as Be}from"./system-DaJnZECp.js";const $e={class:"app-container"},Fe={class:"card-header"},qe={class:"type-list"},ze=["onClick"],Ee={class:"type-info"},Re={class:"type-name"},Me={class:"type-code"},Ae={class:"type-actions"},Ie={class:"card-header"},Ke={key:1},We={__name:"dict",setup(Xe){const x=r([]),N=r(!1),T=r(""),u=r(null),U=r([]),S=r(!1),_=r(!1),B=r("新增字典类型"),I=r(null),$=r(!1),d=P({id:null,dictName:"",dictType:"",status:1,remark:""}),le={dictName:[{required:!0,message:"请输入字典名称",trigger:"blur"}],dictType:[{required:!0,message:"请输入字典类型",trigger:"blur"}]},b=r(!1),F=r("新增字典数据"),K=r(null),q=r(!1),s=P({id:null,dictType:"",dictLabel:"",dictValue:"",listClass:"",dictSort:0,status:1,remark:""}),te={dictLabel:[{required:!0,message:"请输入字典标签",trigger:"blur"}],dictValue:[{required:!0,message:"请输入字典键值",trigger:"blur"}]},W=_e(()=>{if(!T.value)return x.value;const o=T.value.toLowerCase();return x.value.filter(e=>e.dictName.toLowerCase().includes(o)||e.dictType.toLowerCase().includes(o))}),z=async()=>{try{N.value=!0;const o=await Ce({page:1,size:100});o&&o.records&&(x.value=o.records)}catch(o){console.error("加载字典类型失败:",o)}finally{N.value=!1}},E=async o=>{u.value=o;try{S.value=!0;const e=await Le(o.dictType);e&&(U.value=e)}catch(e){console.error("加载字典数据失败:",e)}finally{S.value=!1}},ae=()=>{B.value="新增字典类型",d.id=null,d.dictName="",d.dictType="",d.status=1,d.remark="",_.value=!0},oe=o=>{B.value="编辑字典类型",d.id=o.id,d.dictName=o.dictName,d.dictType=o.dictType,d.status=o.status,d.remark=o.remark,_.value=!0},se=async()=>{try{await I.value.validate(),$.value=!0,d.id?(await Ne(d.id,d),k.success("更新成功")):(await Ue(d),k.success("创建成功")),_.value=!1,z()}catch(o){console.error("提交失败:",o)}finally{$.value=!1}},de=o=>{ee.confirm(`确定要删除字典类型"${o.dictName}"吗？
将同时删除该类型下的所有字典数据！`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await De(o.id),k.success("删除成功"),u.value&&u.value.id===o.id&&(u.value=null,U.value=[]),z()}catch(e){console.error("删除失败:",e)}}).catch(()=>{})},ie=()=>{F.value="新增字典数据",s.id=null,s.dictType=u.value.dictType,s.dictLabel="",s.dictValue="",s.listClass="",s.dictSort=0,s.status=1,s.remark="",b.value=!0},ne=o=>{F.value="编辑字典数据",s.id=o.id,s.dictType=o.dictType,s.dictLabel=o.dictLabel,s.dictValue=o.dictValue,s.listClass=o.listClass,s.dictSort=o.dictSort,s.status=o.status,s.remark=o.remark,b.value=!0},re=async()=>{try{await K.value.validate(),q.value=!0,s.id?(await Se(s.id,s),k.success("更新成功")):(await Be(s),k.success("创建成功")),b.value=!1,E(u.value)}catch(o){console.error("提交失败:",o)}finally{q.value=!1}},ue=o=>{ee.confirm(`确定要删除字典数据"${o.dictLabel}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await xe(o.id),k.success("删除成功"),E(u.value)}catch(e){console.error("删除失败:",e)}}).catch(()=>{})};return be(()=>{z()}),(o,e)=>{const R=i("el-icon"),p=i("el-button"),y=i("el-input"),pe=i("el-empty"),X=i("el-card"),j=i("el-col"),M=i("el-tag"),v=i("el-table-column"),ce=i("el-table"),me=i("el-row"),c=i("el-form-item"),C=i("el-radio"),G=i("el-radio-group"),H=i("el-form"),J=i("el-dialog"),V=i("el-option"),fe=i("el-select"),ye=i("el-input-number"),O=Ve("loading");return m(),w("div",$e,[l(me,{gutter:20},{default:t(()=>[l(j,{span:8},{default:t(()=>[l(X,null,{header:t(()=>[f("div",Fe,[e[16]||(e[16]=f("span",null,"字典类型",-1)),l(p,{type:"primary",size:"small",onClick:ae},{default:t(()=>[l(R,null,{default:t(()=>[l(A(h))]),_:1}),e[15]||(e[15]=n(" 新增 ",-1))]),_:1})])]),default:t(()=>[l(y,{modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=a=>T.value=a),placeholder:"搜索字典类型",clearable:"",style:{"margin-bottom":"15px"}},{prefix:t(()=>[l(R,null,{default:t(()=>[l(A(ge))]),_:1})]),_:1},8,["modelValue"]),Q((m(),w("div",qe,[(m(!0),w(ke,null,we(W.value,a=>(m(),w("div",{key:a.id,class:Te(["type-item",{active:u.value&&u.value.id===a.id}]),onClick:L=>E(a)},[f("div",Ee,[f("div",Re,g(a.dictName),1),f("div",Me,g(a.dictType),1)]),f("div",Ae,[l(p,{link:"",type:"primary",size:"small",onClick:Z(L=>oe(a),["stop"])},{default:t(()=>[...e[17]||(e[17]=[n("编辑",-1)])]),_:1},8,["onClick"]),l(p,{link:"",type:"danger",size:"small",onClick:Z(L=>de(a),["stop"])},{default:t(()=>[...e[18]||(e[18]=[n("删除",-1)])]),_:1},8,["onClick"])])],10,ze))),128)),W.value.length===0?(m(),D(pe,{key:0,description:"暂无字典类型"})):Y("",!0)])),[[O,N.value]])]),_:1})]),_:1}),l(j,{span:16},{default:t(()=>[l(X,null,{header:t(()=>[f("div",Ie,[f("span",null,[e[19]||(e[19]=n(" 字典数据 ",-1)),u.value?(m(),D(M,{key:0,type:"info",style:{"margin-left":"10px"}},{default:t(()=>[n(g(u.value.dictName),1)]),_:1})):Y("",!0)]),l(p,{type:"primary",size:"small",disabled:!u.value,onClick:ie},{default:t(()=>[l(R,null,{default:t(()=>[l(A(h))]),_:1}),e[20]||(e[20]=n(" 新增 ",-1))]),_:1},8,["disabled"])])]),default:t(()=>[Q((m(),D(ce,{data:U.value,border:"",stripe:""},{default:t(()=>[l(v,{prop:"dictLabel",label:"字典标签","min-width":"120"}),l(v,{prop:"dictValue",label:"字典键值",width:"120"}),l(v,{prop:"dictSort",label:"排序",width:"80"}),l(v,{prop:"listClass",label:"样式",width:"100"},{default:t(a=>[a.row.listClass?(m(),D(M,{key:0,type:a.row.listClass},{default:t(()=>[n(g(a.row.dictLabel),1)]),_:2},1032,["type"])):(m(),w("span",Ke,g(a.row.dictLabel),1))]),_:1}),l(v,{prop:"status",label:"状态",width:"80"},{default:t(a=>[l(M,{type:a.row.status===1?"success":"danger"},{default:t(()=>[n(g(a.row.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(v,{prop:"remark",label:"备注","min-width":"150","show-overflow-tooltip":""}),l(v,{label:"操作",width:"150",fixed:"right"},{default:t(a=>[l(p,{link:"",type:"primary",onClick:L=>ne(a.row)},{default:t(()=>[...e[21]||(e[21]=[n("编辑",-1)])]),_:1},8,["onClick"]),l(p,{link:"",type:"danger",onClick:L=>ue(a.row)},{default:t(()=>[...e[22]||(e[22]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,S.value]])]),_:1})]),_:1})]),_:1}),l(J,{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=a=>_.value=a),title:B.value,width:"500px"},{footer:t(()=>[l(p,{onClick:e[5]||(e[5]=a=>_.value=!1)},{default:t(()=>[...e[25]||(e[25]=[n("取消",-1)])]),_:1}),l(p,{type:"primary",onClick:se,loading:$.value},{default:t(()=>[...e[26]||(e[26]=[n("确定",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(H,{ref_key:"typeFormRef",ref:I,model:d,rules:le,"label-width":"100px"},{default:t(()=>[l(c,{label:"字典名称",prop:"dictName"},{default:t(()=>[l(y,{modelValue:d.dictName,"onUpdate:modelValue":e[1]||(e[1]=a=>d.dictName=a),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),l(c,{label:"字典类型",prop:"dictType"},{default:t(()=>[l(y,{modelValue:d.dictType,"onUpdate:modelValue":e[2]||(e[2]=a=>d.dictType=a),placeholder:"请输入字典类型",disabled:!!d.id},null,8,["modelValue","disabled"])]),_:1}),l(c,{label:"状态",prop:"status"},{default:t(()=>[l(G,{modelValue:d.status,"onUpdate:modelValue":e[3]||(e[3]=a=>d.status=a)},{default:t(()=>[l(C,{value:1},{default:t(()=>[...e[23]||(e[23]=[n("启用",-1)])]),_:1}),l(C,{value:0},{default:t(()=>[...e[24]||(e[24]=[n("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"备注",prop:"remark"},{default:t(()=>[l(y,{modelValue:d.remark,"onUpdate:modelValue":e[4]||(e[4]=a=>d.remark=a),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(J,{modelValue:b.value,"onUpdate:modelValue":e[14]||(e[14]=a=>b.value=a),title:F.value,width:"500px"},{footer:t(()=>[l(p,{onClick:e[13]||(e[13]=a=>b.value=!1)},{default:t(()=>[...e[29]||(e[29]=[n("取消",-1)])]),_:1}),l(p,{type:"primary",onClick:re,loading:q.value},{default:t(()=>[...e[30]||(e[30]=[n("确定",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(H,{ref_key:"dataFormRef",ref:K,model:s,rules:te,"label-width":"100px"},{default:t(()=>[l(c,{label:"字典标签",prop:"dictLabel"},{default:t(()=>[l(y,{modelValue:s.dictLabel,"onUpdate:modelValue":e[7]||(e[7]=a=>s.dictLabel=a),placeholder:"请输入字典标签（显示名称）"},null,8,["modelValue"])]),_:1}),l(c,{label:"字典键值",prop:"dictValue"},{default:t(()=>[l(y,{modelValue:s.dictValue,"onUpdate:modelValue":e[8]||(e[8]=a=>s.dictValue=a),placeholder:"请输入字典键值（实际值）"},null,8,["modelValue"])]),_:1}),l(c,{label:"显示样式",prop:"listClass"},{default:t(()=>[l(fe,{modelValue:s.listClass,"onUpdate:modelValue":e[9]||(e[9]=a=>s.listClass=a),placeholder:"选择样式",clearable:""},{default:t(()=>[l(V,{label:"默认",value:""}),l(V,{label:"主要(primary)",value:"primary"}),l(V,{label:"成功(success)",value:"success"}),l(V,{label:"信息(info)",value:"info"}),l(V,{label:"警告(warning)",value:"warning"}),l(V,{label:"危险(danger)",value:"danger"})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"排序",prop:"dictSort"},{default:t(()=>[l(ye,{modelValue:s.dictSort,"onUpdate:modelValue":e[10]||(e[10]=a=>s.dictSort=a),min:0,max:999},null,8,["modelValue"])]),_:1}),l(c,{label:"状态",prop:"status"},{default:t(()=>[l(G,{modelValue:s.status,"onUpdate:modelValue":e[11]||(e[11]=a=>s.status=a)},{default:t(()=>[l(C,{value:1},{default:t(()=>[...e[27]||(e[27]=[n("启用",-1)])]),_:1}),l(C,{value:0},{default:t(()=>[...e[28]||(e[28]=[n("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"备注",prop:"remark"},{default:t(()=>[l(y,{modelValue:s.remark,"onUpdate:modelValue":e[12]||(e[12]=a=>s.remark=a),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},He=ve(We,[["__scopeId","data-v-e9484e52"]]);export{He as default};
