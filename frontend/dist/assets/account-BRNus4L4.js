import{d as F,r as L,w as M}from"./trade-BY624NMh.js";import{_ as $,u as H,r as y,m as j,c as q,d as a,w as t,f as n,E as v,o as i,b as o,v as r,h as _,e as l,n as G}from"./index-Dl24hcOp.js";const J={class:"app-container"},K={class:"asset-value"},O={class:"asset-value frozen"},P={class:"asset-value total"},Q={class:"asset-value"},X={__name:"account",setup(Y){const N=H(),x=y(N.userId||1),s=y({}),m=y({amount:""}),I=y(!1),d=y({amount:""}),z=y(!1),R=y([{type:"recharge",amount:2e4,balance:2e4,time:"2024-01-15 10:30:00",remark:"初始充值"},{type:"withdraw",amount:5e3,balance:15e3,time:"2024-01-20 14:20:00",remark:"提现到银行卡"}]),V=async()=>{try{const p=await F(x.value);s.value=p}catch(p){console.error("加载账户信息失败:",p),v.error("加载账户信息失败")}},S=async()=>{if(!m.value.amount||m.value.amount<=0){v.warning("请输入有效的充值金额");return}I.value=!0;try{await L(x.value,m.value.amount),v.success("充值成功"),m.value.amount="",V()}catch(p){console.error("充值失败:",p),v.error("充值失败")}finally{I.value=!1}},T=async()=>{if(!d.value.amount||d.value.amount<=0){v.warning("请输入有效的提现金额");return}if(d.value.amount>s.value.balance){v.warning("提现金额不能大于账户余额");return}z.value=!0;try{await M(x.value,d.value.amount),v.success("提现成功"),d.value.amount="",V()}catch(p){console.error("提现失败:",p),v.error("提现失败")}finally{z.value=!1}};return j(()=>{V()}),(p,e)=>{const f=n("el-card"),b=n("el-col"),c=n("el-tag"),A=n("el-row"),B=n("el-input"),C=n("el-form-item"),w=n("el-button"),E=n("el-form"),g=n("el-descriptions-item"),U=n("el-descriptions"),W=n("el-empty"),k=n("el-table-column"),D=n("el-table");return i(),q("div",J,[a(A,{gutter:20,style:{"margin-bottom":"20px"}},{default:t(()=>[a(b,{span:6},{default:t(()=>[a(f,{class:"asset-card"},{default:t(()=>[e[4]||(e[4]=o("div",{class:"asset-label"},"账户余额",-1)),o("div",K,"¥"+r(s.value.balance||0),1),e[5]||(e[5]=o("div",{class:"asset-desc"},"可用资金",-1))]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(f,{class:"asset-card"},{default:t(()=>[e[6]||(e[6]=o("div",{class:"asset-label"},"冻结金额",-1)),o("div",O,"¥"+r(s.value.frozenAmount||0),1),e[7]||(e[7]=o("div",{class:"asset-desc"},"挂单占用",-1))]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(f,{class:"asset-card"},{default:t(()=>[e[8]||(e[8]=o("div",{class:"asset-label"},"总资产",-1)),o("div",P,"¥"+r(s.value.totalAssets||0),1),e[9]||(e[9]=o("div",{class:"asset-desc"},"余额+冻结",-1))]),_:1})]),_:1}),a(b,{span:6},{default:t(()=>[a(f,{class:"asset-card"},{default:t(()=>[e[13]||(e[13]=o("div",{class:"asset-label"},"账户状态",-1)),o("div",Q,[s.value.status===0?(i(),_(c,{key:0,type:"success"},{default:t(()=>[...e[10]||(e[10]=[l("正常",-1)])]),_:1})):s.value.status===1?(i(),_(c,{key:1,type:"warning"},{default:t(()=>[...e[11]||(e[11]=[l("冻结",-1)])]),_:1})):(i(),_(c,{key:2,type:"danger"},{default:t(()=>[...e[12]||(e[12]=[l("注销",-1)])]),_:1}))])]),_:1})]),_:1})]),_:1}),a(A,{gutter:20,style:{"margin-bottom":"20px"}},{default:t(()=>[a(b,{span:12},{default:t(()=>[a(f,null,{header:t(()=>[...e[14]||(e[14]=[o("span",null,"充值",-1)])]),default:t(()=>[a(E,{model:m.value,"label-width":"80px"},{default:t(()=>[a(C,{label:"充值金额"},{default:t(()=>[a(B,{modelValue:m.value.amount,"onUpdate:modelValue":e[0]||(e[0]=u=>m.value.amount=u),type:"number",placeholder:"请输入充值金额"},{prefix:t(()=>[...e[15]||(e[15]=[l("¥",-1)])]),_:1},8,["modelValue"])]),_:1}),a(C,null,{default:t(()=>[a(w,{type:"primary",onClick:S,loading:I.value},{default:t(()=>[...e[16]||(e[16]=[l(" 确认充值 ",-1)])]),_:1},8,["loading"]),a(w,{onClick:e[1]||(e[1]=u=>m.value.amount="")},{default:t(()=>[...e[17]||(e[17]=[l("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),a(b,{span:12},{default:t(()=>[a(f,null,{header:t(()=>[...e[18]||(e[18]=[o("span",null,"提现",-1)])]),default:t(()=>[a(E,{model:d.value,"label-width":"80px"},{default:t(()=>[a(C,{label:"提现金额"},{default:t(()=>[a(B,{modelValue:d.value.amount,"onUpdate:modelValue":e[2]||(e[2]=u=>d.value.amount=u),type:"number",placeholder:"请输入提现金额"},{prefix:t(()=>[...e[19]||(e[19]=[l("¥",-1)])]),_:1},8,["modelValue"])]),_:1}),a(C,null,{default:t(()=>[a(w,{type:"danger",onClick:T,loading:z.value},{default:t(()=>[...e[20]||(e[20]=[l(" 确认提现 ",-1)])]),_:1},8,["loading"]),a(w,{onClick:e[3]||(e[3]=u=>d.value.amount="")},{default:t(()=>[...e[21]||(e[21]=[l("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),a(f,{style:{"margin-bottom":"20px"}},{header:t(()=>[...e[22]||(e[22]=[o("span",null,"账户统计",-1)])]),default:t(()=>[a(U,{border:"",column:3},{default:t(()=>[a(g,{label:"累计充值"},{default:t(()=>[l("¥"+r(s.value.totalRecharge||0),1)]),_:1}),a(g,{label:"累计提现"},{default:t(()=>[l("¥"+r(s.value.totalWithdraw||0),1)]),_:1}),a(g,{label:"净充值"},{default:t(()=>[l("¥"+r((s.value.totalRecharge||0)-(s.value.totalWithdraw||0)),1)]),_:1}),a(g,{label:"注册时间"},{default:t(()=>[l(r(s.value.createTime||"-"),1)]),_:1}),a(g,{label:"最后更新"},{default:t(()=>[l(r(s.value.updateTime||"-"),1)]),_:1}),a(g,{label:"用户ID"},{default:t(()=>[l(r(x.value),1)]),_:1})]),_:1})]),_:1}),a(f,null,{header:t(()=>[e[24]||(e[24]=o("span",null,"交易记录",-1)),a(w,{style:{float:"right"},size:"small",onClick:V},{default:t(()=>[...e[23]||(e[23]=[l("刷新",-1)])]),_:1})]),default:t(()=>[s.value.id?(i(),_(D,{key:1,data:R.value,border:"",stripe:""},{default:t(()=>[a(k,{prop:"type",label:"类型",width:"100"},{default:t(u=>[u.row.type==="recharge"?(i(),_(c,{key:0,type:"success"},{default:t(()=>[...e[25]||(e[25]=[l("充值",-1)])]),_:1})):u.row.type==="withdraw"?(i(),_(c,{key:1,type:"danger"},{default:t(()=>[...e[26]||(e[26]=[l("提现",-1)])]),_:1})):(i(),_(c,{key:2,type:"info"},{default:t(()=>[...e[27]||(e[27]=[l("其他",-1)])]),_:1}))]),_:1}),a(k,{prop:"amount",label:"金额",width:"150"},{default:t(u=>[o("span",{class:G(u.row.type==="recharge"?"text-success":"text-danger")},r(u.row.type==="recharge"?"+":"-")+"¥"+r(u.row.amount),3)]),_:1}),a(k,{prop:"balance",label:"账户余额",width:"150"}),a(k,{prop:"time",label:"时间"}),a(k,{prop:"remark",label:"备注"})]),_:1},8,["data"])):(i(),_(W,{key:0,description:"暂无交易记录"}))]),_:1})])}}},ee=$(X,[["__scopeId","data-v-b9670699"]]);export{ee as default};
