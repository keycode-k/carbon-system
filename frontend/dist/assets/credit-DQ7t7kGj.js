import{g as F}from"./assets-QRNHCeCq.js";import{_ as M,r as v,k as P,i as Q,c as R,d as t,w as l,f as a,m as $,o as d,b as n,t as c,e as o,l as G,g as r,q as C}from"./index-CAroDxw1.js";import"./request-xGXa7hEd.js";const H={class:"app-container"},J={class:"stat-box bg-blue"},K={class:"num"},W={class:"trend"},X={class:"filter-container"},Y={style:{float:"right"}},Z={class:"pagination-container"},h={__name:"credit",setup(ee){const g=v(!1),y=v([]),V=v(""),D=v(""),k=v(!1),u=v({}),j=b=>{u.value=b,k.value=!0},I=P(()=>y.value.reduce((b,e)=>b+(e.amount||0),0)),N=async()=>{if(g.value=!0,!localStorage.getItem("token")){g.value=!1;return}try{const i=await F(1);i&&i.length!==void 0?y.value=i:i&&i.code===200?y.value=i.data||[]:Array.isArray(i)&&(y.value=i)}catch(e){console.error(e)}finally{g.value=!1}};return Q(()=>{N()}),(b,e)=>{const i=a("Top"),T=a("el-icon"),x=a("el-col"),S=a("el-row"),z=a("el-input"),w=a("el-option"),B=a("el-select"),p=a("el-button"),_=a("el-table-column"),m=a("el-tag"),A=a("el-table"),U=a("el-pagination"),f=a("el-descriptions-item"),L=a("el-descriptions"),O=a("el-dialog"),q=a("el-card"),E=$("loading");return d(),R("div",H,[t(S,{gutter:20,style:{"margin-bottom":"20px"}},{default:l(()=>[t(x,{span:8},{default:l(()=>[n("div",J,[e[4]||(e[4]=n("div",{class:"title"},"总持有量 (tCO2e)",-1)),n("div",K,c(I.value.toLocaleString()),1),n("div",W,[e[3]||(e[3]=o("较上月 +0% ",-1)),t(T,null,{default:l(()=>[t(i)]),_:1})])])]),_:1}),t(x,{span:8},{default:l(()=>[...e[5]||(e[5]=[n("div",{class:"stat-box bg-green"},[n("div",{class:"title"},"今日新增"),n("div",{class:"num"},"2,000"),n("div",{class:"trend"},"-")],-1)])]),_:1}),t(x,{span:8},{default:l(()=>[...e[6]||(e[6]=[n("div",{class:"stat-box bg-purple"},[n("div",{class:"title"},"冻结/交易中"),n("div",{class:"num"},"15,000")],-1)])]),_:1})]),_:1}),t(q,{shadow:"hover"},{default:l(()=>[n("div",X,[t(z,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=s=>V.value=s),placeholder:"项目名称/ID",style:{width:"200px","margin-right":"10px"},"prefix-icon":"Search"},null,8,["modelValue"]),t(B,{modelValue:D.value,"onUpdate:modelValue":e[1]||(e[1]=s=>D.value=s),placeholder:"状态",style:{width:"120px","margin-right":"10px"}},{default:l(()=>[t(w,{label:"全部",value:""}),t(w,{label:"持有中",value:"active"}),t(w,{label:"交易中",value:"trading"}),t(w,{label:"已注销",value:"retired"})]),_:1},8,["modelValue"]),t(p,{type:"primary",icon:"Search"},{default:l(()=>[...e[7]||(e[7]=[o("搜索",-1)])]),_:1}),t(p,{icon:"Refresh"},{default:l(()=>[...e[8]||(e[8]=[o("重置",-1)])]),_:1}),n("div",Y,[t(p,{type:"success",icon:"Plus"},{default:l(()=>[...e[9]||(e[9]=[o("登记资产",-1)])]),_:1}),t(p,{type:"warning",icon:"Download"},{default:l(()=>[...e[10]||(e[10]=[o("导出",-1)])]),_:1})])]),G((d(),r(A,{data:y.value,border:"",style:{width:"100%","margin-top":"20px"},stripe:""},{default:l(()=>[t(_,{prop:"id",label:"ID",width:"80"}),t(_,{prop:"projectName",label:"项目名称","min-width":"200","show-overflow-tooltip":""}),t(_,{prop:"projectType",label:"类型",width:"100"},{default:l(s=>[t(m,{size:"small"},{default:l(()=>[o(c(s.row.projectType),1)]),_:2},1024)]),_:1}),t(_,{prop:"amount",label:"持有量(t)",width:"120",sortable:""}),t(_,{prop:"issueDate",label:"签发日期",width:"120"}),t(_,{prop:"status",label:"状态",width:"100"},{default:l(s=>[s.row.status===0?(d(),r(m,{key:0,type:"success"},{default:l(()=>[...e[11]||(e[11]=[o("持有中",-1)])]),_:1})):s.row.status===1?(d(),r(m,{key:1,type:"warning"},{default:l(()=>[...e[12]||(e[12]=[o("交易中",-1)])]),_:1})):(d(),r(m,{key:2,type:"info"},{default:l(()=>[...e[13]||(e[13]=[o("已注销",-1)])]),_:1}))]),_:1}),t(_,{label:"操作",width:"200",fixed:"right"},{default:l(s=>[t(p,{link:"",type:"primary",size:"small",onClick:te=>j(s.row)},{default:l(()=>[...e[14]||(e[14]=[o("详情",-1)])]),_:1},8,["onClick"]),s.row.status===0?(d(),r(p,{key:0,link:"",type:"success",size:"small"},{default:l(()=>[...e[15]||(e[15]=[o("挂牌",-1)])]),_:1})):C("",!0),s.row.status===0?(d(),r(p,{key:1,link:"",type:"danger",size:"small"},{default:l(()=>[...e[16]||(e[16]=[o("注销",-1)])]),_:1})):C("",!0)]),_:1})]),_:1},8,["data"])),[[E,g.value]]),n("div",Z,[t(U,{background:"",layout:"total, prev, pager, next, jumper",total:100})]),t(O,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=s=>k.value=s),title:"资产详情",width:"500px"},{default:l(()=>[t(L,{column:1,border:""},{default:l(()=>[t(f,{label:"项目名称"},{default:l(()=>[o(c(u.value.projectName),1)]),_:1}),t(f,{label:"项目类型"},{default:l(()=>[o(c(u.value.projectType),1)]),_:1}),t(f,{label:"持有量"},{default:l(()=>[o(c(u.value.amount)+" tCO2e",1)]),_:1}),t(f,{label:"签发日期"},{default:l(()=>[o(c(u.value.issueDate),1)]),_:1}),t(f,{label:"有效期至"},{default:l(()=>[o(c(u.value.expiryDate||"长期有效"),1)]),_:1}),t(f,{label:"状态"},{default:l(()=>[u.value.status===0?(d(),r(m,{key:0,type:"success"},{default:l(()=>[...e[17]||(e[17]=[o("持有中",-1)])]),_:1})):u.value.status===1?(d(),r(m,{key:1,type:"warning"},{default:l(()=>[...e[18]||(e[18]=[o("交易中",-1)])]),_:1})):(d(),r(m,{key:2,type:"info"},{default:l(()=>[...e[19]||(e[19]=[o("已注销",-1)])]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}},se=M(h,[["__scopeId","data-v-235789cc"]]);export{se as default};
