# é¡¹ç›®é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

## âœ… å·²å®Œæˆçš„é…ç½®ä¿®æ”¹

### 1. service-provideræ¨¡å—
- âœ… æ›´æ–° application.yml é…ç½®MySQLæ•°æ®æº
- âœ… æ›´æ–° application.yml é…ç½®Redisè¿æ¥ä¿¡æ¯å’Œå¯†ç 
- âœ… æ›´æ–° application.yml é…ç½®Nacosè¿æ¥ä¿¡æ¯å’Œè®¤è¯
- âœ… æ·»åŠ  MySQLé©±åŠ¨ä¾èµ– (pom.xml)
- âœ… æ·»åŠ  MyBatis-Plusä¾èµ– (pom.xml)
- âœ… åˆ›å»º UserMapperæ¥å£
- âœ… æ›´æ–° Userå®ä½“ç±»ï¼ˆæ·»åŠ æ•°æ®åº“æ³¨è§£ï¼‰
- âœ… é‡æ„ UserControllerï¼ˆä»å†…å­˜Mapæ”¹ä¸ºæ•°æ®åº“å­˜å‚¨ï¼‰
- âœ… æ·»åŠ  @MapperScanæ³¨è§£åˆ°å¯åŠ¨ç±»
- âœ… åˆ›å»º init.sql æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

### 2. service-consumeræ¨¡å—
- âœ… æ›´æ–° application.yml é…ç½®Nacosè¿æ¥ä¿¡æ¯å’Œè®¤è¯

---

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

### ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–MySQLæ•°æ®åº“è¡¨

**é€‰é¡¹A - ä½¿ç”¨å‘½ä»¤è¡Œ**
```bash
mysql -h 132.226.64.96 -P 3306 -u 123456 -p123456 test1 < service-provider/src/main/resources/init.sql
```

**é€‰é¡¹B - ä½¿ç”¨MySQLå®¢æˆ·ç«¯**
```sql
-- è¿æ¥ä¿¡æ¯
Host: 132.226.64.96
Port: 3306
Username: 123456
Password: 123456
Database: test1

-- æ‰§è¡ŒSQL
CREATE TABLE IF NOT EXISTS `user` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'ç”¨æˆ·ID',
  `username` VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·å',
  `password` VARCHAR(100) NOT NULL COMMENT 'å¯†ç ',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·è¡¨';
```

### ç¬¬äºŒæ­¥ï¼šé‡æ–°ç¼–è¯‘é¡¹ç›®
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
mvn clean install
```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨æœåŠ¡
```bash
# 1. å¯åŠ¨service-provider (ç»ˆç«¯1)
cd service-provider
mvn spring-boot:run

# 2. å¯åŠ¨service-consumer (ç»ˆç«¯2)
cd service-consumer
mvn spring-boot:run

# 3. å¯åŠ¨å‰ç«¯ (ç»ˆç«¯3)
cd frontend
npm run dev
```

---

## ğŸ” è¿æ¥éªŒè¯

### Nacosè¿æ¥éªŒè¯
è®¿é—®: http://132.226.64.96:8848/nacos
- ç”¨æˆ·å: nacos
- å¯†ç : nacos

æŸ¥çœ‹æœåŠ¡åˆ—è¡¨ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š
- service-provider (ç«¯å£: 8081)
- service-consumer (ç«¯å£: 8082)

### Redisè¿æ¥éªŒè¯
```bash
redis-cli -h 132.226.64.96 -p 6379 -a 20041122gooder
> PING
# åº”è¿”å›: PONG
```

### MySQLè¿æ¥éªŒè¯
```bash
mysql -h 132.226.64.96 -P 3306 -u 123456 -p123456
> USE test1;
> SHOW TABLES;
# åº”æ˜¾ç¤º: user
```

---

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### 1. æµ‹è¯•ç”¨æˆ·æ³¨å†Œ
```bash
curl -X POST http://localhost:8082/api/user/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"123456"}'
```
é¢„æœŸå“åº”ï¼š
```json
{"success":true,"message":"æ³¨å†ŒæˆåŠŸ"}
```

### 2. æµ‹è¯•ç”¨æˆ·ç™»å½•
```bash
curl -X POST http://localhost:8082/api/user/login \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"123456"}'
```
é¢„æœŸå“åº”ï¼š
```json
{"success":true,"message":"ç™»å½•æˆåŠŸ","token":"xxxxx..."}
```

### 3. éªŒè¯Token (è®°å¾—æ›¿æ¢å®é™…token)
```bash
curl "http://localhost:8082/api/user/verifyToken?token=YOUR_TOKEN_HERE"
```
é¢„æœŸå“åº”ï¼š
```json
{"success":true,"message":"tokenæœ‰æ•ˆ","username":"testuser"}
```

### 4. æµ‹è¯•ç™»å‡º
```bash
curl -X POST "http://localhost:8082/api/user/logout?username=testuser"
```
é¢„æœŸå“åº”ï¼š
```json
{"success":true,"message":"ç™»å‡ºæˆåŠŸ"}
```

---

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æ— æ³•è¿æ¥åˆ°Nacos
- æ£€æŸ¥NacosæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤ç«¯å£8848æ˜¯å¦å¼€æ”¾
- ç¡®è®¤ç”¨æˆ·åå¯†ç : nacos/nacos

### é—®é¢˜2: æ— æ³•è¿æ¥åˆ°Redis
- æ£€æŸ¥RedisæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤ç«¯å£6379æ˜¯å¦å¼€æ”¾
- ç¡®è®¤å¯†ç : 20041122gooder

### é—®é¢˜3: æ— æ³•è¿æ¥åˆ°MySQL
- æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤ç«¯å£3306æ˜¯å¦å¼€æ”¾
- ç¡®è®¤ç”¨æˆ·åå¯†ç : 123456/123456
- ç¡®è®¤æ•°æ®åº“test1å­˜åœ¨

### é—®é¢˜4: æœåŠ¡æ³¨å†Œå¤±è´¥
æŸ¥çœ‹æ—¥å¿—ä¸­æ˜¯å¦æœ‰ä»¥ä¸‹é”™è¯¯ï¼š
- `Connection refused` - æœåŠ¡å™¨è¿æ¥è¢«æ‹’ç»
- `Authentication failed` - è®¤è¯å¤±è´¥
- `No available server` - æœåŠ¡å™¨ä¸å¯ç”¨

---

## ğŸ“Š é…ç½®æ‘˜è¦

| æœåŠ¡ | åœ°å€ | è®¤è¯ä¿¡æ¯ | ç”¨é€” |
|------|------|----------|------|
| MySQL | 132.226.64.96:3306 | ç”¨æˆ·å:123456<br>å¯†ç :123456<br>æ•°æ®åº“:test1 | ç”¨æˆ·æ•°æ®å­˜å‚¨ |
| Redis | 132.226.64.96:6379 | å¯†ç :20041122gooder | Tokenç¼“å­˜ |
| Nacos | 132.226.64.96:8848 | ç”¨æˆ·å:nacos<br>å¯†ç :nacos | æœåŠ¡æ³¨å†Œä¸å‘ç° |
| Provider | localhost:8081 | - | ä¸šåŠ¡æœåŠ¡æä¾›è€… |
| Consumer | localhost:8082 | - | ä¸šåŠ¡æœåŠ¡æ¶ˆè´¹è€… |
| Frontend | localhost:5173 | - | Vueå‰ç«¯ç•Œé¢ |

---

## ğŸ¯ æ•°æ®æµå‘

```
ç”¨æˆ·æµè§ˆå™¨ (localhost:5173)
    â†“
service-consumer (localhost:8082)
    â†“ (é€šè¿‡OpenFeignè°ƒç”¨)
service-provider (localhost:8081)
    â†“
MySQL (132.226.64.96:3306) - å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
Redis (132.226.64.96:6379) - å­˜å‚¨Tokenä¼šè¯
    â†‘
Nacos (132.226.64.96:8848) - æœåŠ¡æ³¨å†Œä¸å‘ç°
```

---

æ‰€æœ‰é…ç½®å·²å®Œæˆï¼Œè¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤è¿›è¡Œåˆå§‹åŒ–å’Œæµ‹è¯•ï¼
